<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AresGram - –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</title>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="messenger-container">
        <!-- –°–∞–π–¥–±–∞—Ä -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="header-left">
                    <div class="hamburger-menu" onclick="toggleSlideMenu()">
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                    </div>
                    <h1>AresGram</h1>
                </div>
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar" onclick="showMyProfile()">U</div>
                </div>
            </div>

            <div class="search-container">
                <input type="text" class="search-box" id="searchInput" placeholder="@username, –∏–º—è –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω...">
            </div>

            <div class="chats-controls">
                <button class="control-button" onclick="showCreateChatModal()">+ –°–æ–∑–¥–∞—Ç—å —á–∞—Ç</button>
                <button class="control-button" onclick="refreshUsers()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>

            <div class="chats-list" id="chatsList">
                <!-- –ß–∞—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ -->
        <div class="chat-area">
            <div class="chat-header">
                <div class="chat-header-info">
                    <div class="user-avatar" id="currentChatAvatar">?</div>
                    <div>
                        <h3 id="currentChatName">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</h3>
                        <span class="status" id="chatStatus">offline</span>
                    </div>
                </div>
                <div>
                    <button class="logout-btn" id="leaveChatBtn" onclick="leaveChat()" style="display: none;">–ü–æ–∫–∏–Ω—É—Ç—å —á–∞—Ç</button>
                </div>
            </div>

            <div class="messages-container" id="messagesContainer">
                <div class="message received">
                    –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ AresGram! –ù–∞–π–¥–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ.
                </div>
            </div>
            <!-- –û–±–Ω–æ–≤–∏—Ç–µ –±–ª–æ–∫ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
            <!-- –û–±–Ω–æ–≤–∏—Ç–µ –±–ª–æ–∫ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
            <div class="message-input-container">
                <input type="text" class="message-input" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." disabled>
                <button class="send-button" id="sendButton" onclick="sendMessage()" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>

                <!-- –ù–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
                <button class="send-button" id="enableNotificationsBtn" onclick="requestNotificationPermission()" style="background: #2d9cdb;">–í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>
                <button class="send-button" id="testNotificationBtn" onclick="testSimpleNotification()" style="background: #27ae60;">–¢–µ—Å—Ç –£–≤–µ–¥–æ–º.</button>
            </div>

        </div>
    </div>

    <!-- –ú–µ–Ω—é –≤—ã–µ–∑–∂–∞—é—â–µ–µ —Å –ª–µ–≤–æ–≥–æ –±–æ–∫–∞ —ç–∫—Ä–∞–Ω–∞ -->
    <div class="sidebar-menu" id="sidebarMenu">
        <div class="sidebar-menu-content">
            <div class="menu-header-sidebar">
                <button class="close-sidebar-menu-btn" onclick="closeSidebarMenu()">‚úï</button>
            </div>
            
            <div class="sidebar-profile-section">
                <div class="sidebar-profile-avatar" id="sidebarUserAvatar" onclick="showMyProfile()">U</div>
                <div class="sidebar-profile-info">
                    <div class="sidebar-profile-name" id="sidebarUsername">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                    <div class="sidebar-profile-email" id="sidebarUserEmail">email@example.com</div>
                </div>
            </div>

            <div class="sidebar-menu-options">
                <div class="sidebar-option" onclick="showMyProfile()">
                    <div class="sidebar-option-icon">üë§</div>
                    <div class="sidebar-option-text">
                        <div class="sidebar-option-title">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</div>
                    </div>
                </div>

                <div class="sidebar-option" onclick="showProfileSettings()">
                    <div class="sidebar-option-icon">‚öôÔ∏è</div>
                    <div class="sidebar-option-text">
                        <div class="sidebar-option-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</div>
                    </div>
                </div>

                <div class="sidebar-option" onclick="showAppSettings()">
                    <div class="sidebar-option-icon">üîß</div>
                    <div class="sidebar-option-text">
                        <div class="sidebar-option-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</div>
                    </div>
                </div>

                <div class="sidebar-option" onclick="showMyChats()">
                    <div class="sidebar-option-icon">üí¨</div>
                    <div class="sidebar-option-text">
                        <div class="sidebar-option-title">–ú–æ–∏ —á–∞—Ç—ã</div>
                    </div>
                </div>

                <div class="sidebar-option" onclick="showAppearanceSettings()">
                    <div class="sidebar-option-icon">üé®</div>
                    <div class="sidebar-option-text">
                        <div class="sidebar-option-title">–í–Ω–µ—à–Ω–∏–π –≤–∏–¥</div>
                    </div>
                </div>

                <div class="sidebar-option" onclick="showNotificationSettings()">
                    <div class="sidebar-option-icon">üîî</div>
                    <div class="sidebar-option-text">
                        <div class="sidebar-option-title">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
                    </div>
                </div>

                <div class="sidebar-option sidebar-logout" onclick="logout()">
                    <div class="sidebar-option-icon">üö™</div>
                    <div class="sidebar-option-text">
                        <div class="sidebar-option-title">–í—ã–π—Ç–∏</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç–∞ -->
    <div class="modal" id="createChatModal">
        <div class="modal-content">
            <h2>–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç</h2>
            <input type="text" class="modal-input" id="newChatName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞">
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="hideCreateChatModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn primary" onclick="createGroupChat()">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="app.js"></script>
</body>
</html>